{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {
    "url": "https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-02-18/food_consumption.csv",
    "format": { "type": "csv" }
  },
  "vconcat": [
    {
      "hconcat": [
        {
          "layer": [
            {
              "mark": {
                "type": "geoshape",
                "fill": "white",
                "stroke": "#000",
                "strokeWidth": 1,
                "strokeOpacity": 0.5
              },
              "data": {
                "url": "https://raw.githubusercontent.com/brechtv/looker_map_layers/master/world-countries-sans-antarctica.json",
                "format": { "type": "topojson", "feature": "countries1" }
              }
            },
            {
              "mark": {
                "type": "geoshape",
                "stroke": "#000000",
                "strokeWidth": 0.5
              },
              "data": {
                "url": "https://raw.githubusercontent.com/brechtv/looker_map_layers/master/world-countries-sans-antarctica.json",
                "format": { "type": "topojson", "feature": "countries1" }
              },
              "transform": [
                {
                  "lookup": "properties.name",
                  "from": {
                    "data": {
                      "url": "https://raw.githubusercontent.com/Zhaohuan-Guo/vega-lite-Co2/main/updated_data_new.csv"
                    },
                    "key": "country",
                    "fields": [
                      "co2_emission_all",
                      "co2_emission",
                      "co2_emission_category",
                      "co2_emission_animal",
                      "co2_emission_non_animals"
                    ]
                  }
                }
              ],
              "encoding": {
                "color": { "field": "co2_emission_all", "type": "quantitative" },
                "tooltip": [
                  { "field": "properties.name", "type": "nominal", "title": "country" },
                  { "field": "co2_emission_all", "type": "nominal", "title": "CO2 emission" },
                  {
                    "field": "co2_emission_animal",
                    "type": "nominal",
                    "title": "Animal Product CO2 emission"
                  },
                  {
                    "field": "co2_emission_non_animals",
                    "type": "nominal",
                    "title": "Non-Animal ProductCO2 emission"
                  }
                ]
              }
            }
          ],
          "projection": { "type": "equirectangular" },
          "width": 500,
          "height": 200
        },
        {

          "mark": "arc",
          "encoding": {
            "theta": { "field": "count", "type": "quantitative", "stack": true },
            "color": { "field": "range", "type": "nominal", "scale": { "range": ["red", "green", "blue", "purple"] } }
          }
        }
        
      ]
    }
  ]
}
